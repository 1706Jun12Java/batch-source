<!DOCTYPE html>
<html>
<head>
    <meta charset="ISO-8859-1">
    <title>DOM</title>
</head>
<body>
<div>
    <div>
        <h3>
            Sum: <span id="sum"></span>
        </h3>
        <h5 id="currentTime"></h5>
    </div>
    <div>
        <h1>
            United <span data-customAttr="USA">States</span> of America (<span>USA</span>)
        </h1>
        <div>
            <a>Click Here</a><a>Click Here</a><a>Click Here</a><a>Click Here</a><a>Click
            Here</a>
        </div>
        <a>Click Here</a> <a>Click <span>Here1</span></a> <a>Click Here</a>
        <div>
            <select name="colors">
                <option value="green">Green</option>
                <option value="blue">Blue</option>
                <option value="red" selected="selected">Red</option>
                <option value="purple">Purple</option>
                <option value="yellow" selected="selected">Yellow</option>
            </select>
        </div>
    </div>
    <p id="helloWorld">Hello, World!</p>
    <div>
        <table>
            <tr>
                <th>Name</th>
                <th>Department</th>
            </tr>
            <tr>
                <td class="empName">John</td>
                <td>Sales</td>
            </tr>
            <tr>
                <td class="empName">Amy</td>
                <td>Finance</td>
            </tr>
            <tr>
                <td class="empName">Austin</td>
                <td>Sales</td>
            </tr>
            <tr>
                <td class="empName">Katie</td>
                <td>Marketing</td>
            </tr>
            <tr>
                <td class="empName" data-customAttr="court">Courtney</td>
                <td>Sales</td>
            </tr>
            <tr>
                <td class="empName">Scout</td>
                <td>Sales</td>
            </tr>
        </table>
    </div>
    <form id="firstForm">
        <a>Click <span>Here2</span></a> <input type="text"
                                               data-customAttr="7" /><br /> <input type="text" data-customAttr="24" /><br />
        <input type="radio" name="favoriteAnimal" value="dog" />Dog<br /> <input
            type="radio" name="favoriteColor" value="blue" />Blue<br /> <input
            id="num1" class="nums" type="text" /><br /> <input type="radio"
                                                               name="favoriteAnimal" value="cat" />Cat<br /> <input type="radio"
                                                                                                                    name="favoriteColor" value="red" />Red<br /> <input type="radio"
                                                                                                                                                                        name="favoriteAnimal" value="horse" />Horse<br /> <input
            type="radio" name="favoriteAnimal" value="dolphin" />Dolphin<br /> <a>Click
        <span>Here</span>
    </a><br /> <input type="radio" name="favoriteAnimal" value="eagle" />Eagle<br />
        <input type="radio" name="favoriteColor" value="green" />Green<br />
        <input type="radio" name="favoriteColor" value="orange" />Orange<br />
        <select name="hobbies">
            <option value="photography">Photography</option>
            <option value="football" selected="selected">Football</option>
            <option value="kayaking" selected="selected">Kayaking</option>
            <option value="hiking">Hiking</option>
            <option value="programming" selected="selected">Programming</option>
        </select> <input id="num2" class="nums" type="text" /> <select name="skills">
        <option value="java">Java</option>
        <option value="net">.NET</option>
        <option value="dom" selected="selected">DOM</option>
        <option value="html">HTML</option>
        <option value="css">CSS</option>
        <option value="javascript" selected="selected">Javascript</option>
    </select>
    </form>
</div>
<a>Click Here</a>
<a>Click <span data-customAttr="500">Here3</span></a>
<a>Click Here</a>
<script type="text/javascript">

    // problem 1
    console.log("problem 1");

    function getUSA(){
        var spans = document.getElementsByTagName("span");
        for (var i in spans){
            if(spans[i].innerText==="USA"){
                console.log(spans[i].outerHTML)
            }
        }
    }

    getUSA();

    // problem 2
    console.log("problem 2");

    function getPeopleInSales(){
        var salesClass = document.getElementsByClassName("empName");
        try{
            for(var i in salesClass){
                if (salesClass[i].parentNode.lastElementChild.innerText === "Sales")
                    console.log(salesClass[i].innerText)
            }
        }catch(err){
        }
    }

    getPeopleInSales();

    // problem 3
    console.log("problem 3");

    function getAnchorChildren(){
        var spans = document.getElementsByTagName("span");
        for (var i in spans){

            console.log(spans[i].innerText)

        }
    }

    getAnchorChildren();

    // problem 4
    console.log("problem 4");

    function getHobbies() {

        var selects = document.getElementsByTagName("select");
        for (var i in selects){
            if(selects[i].name ==="skills"){
                selects[i].id = "skills_id";  //for problem 7
                var children = (selects[i]);
                for (var j in children){
                    try{
                        if (children[j].getAttribute("selected") === "selected"){
                            console.log(children[j].innerText)
                        }
                    }
                    catch (err){

                    }
                }
                break;
            }
        }
    }

    getHobbies();

    // problem 5
    console.log("problem 5");

    var allElements = document.getElementsByTagName('*');
    for (var i = 0; i < allElements.length; i++) {
        if (allElements[i].getAttribute("data-customAttr"))
        {
            console.log(allElements[i])
        }
    }

    // problem 6
    console.log("problem 6");

    function computeSum(){
        var elm = document.getElementById("sum");
        var num1 = document.getElementById("num1").value;
        var num2 = document.getElementById("num2").value;

        try{
            num1 = Number(num1);
            num2 = Number(num2);

            var sum = num1 + num2;

            if (isNaN(sum)){
                elm.innerText = "Cannot add";
            }
            else{
                elm.innerText = (num1 + num2);
            }


        }
        catch(err){
            elm.innerText = "Cannot add";
        }
    }

    document.getElementById("num1").addEventListener("change", computeSum);
    document.getElementById("num2").addEventListener("change", computeSum);


    // problem 7

    console.log("problem 7");

    function alertSkillChange(){
        var elt = document.getElementById("skills_id");

        if (elt.selectedIndex == -1)
            return null;

        alert("Are you sure "+ elt.options[elt.selectedIndex].text + " is one of your skills?");
    }

    document.getElementById("skills_id").addEventListener("change", alertSkillChange);

    // problem 8


    console.log("problem 8");

    var radios = document.getElementById("firstForm").elements["favoriteColor"];

    var selectedColor = "";

    for(var i = 0; i < radios.length; i++) {

        radios[i].onclick = function() {

            if (!selectedColor){
                selectedColor = this.value;
                document.body.style.backgroundColor = this.value;
            }
            else if (this.value != selectedColor) {
                alert("So you like " + this.value  +" more than "+ selectedColor + " now?");
                selectedColor = this.value;
                document.body.style.backgroundColor = this.value;
            }
        }
    }

    // problem 9
    console.log("problem 9");

    var salesClass = document.getElementsByClassName("empName");

    for (var i = 0; i<salesClass.length; i++){
        salesClass[i].onmouseover = function(){
            if (this.style.color === "white"){
                    this.style.color = "black";
            }
            else {
                this.style.color = "white";
            }
        }
    }

    // problem 10

    console.log("problem 10");

    setInterval(()=>{
        var elt = document.getElementById("currentTime");
        var date = new Date();
        if (date.getHours() > 12)
            elt.innerText = (date.getHours()-12) +
                ":" + date.getMinutes() + ":" + date.getSeconds() + " PM";
        else
            elt.innerText = (date.getHours()) +
                ":" + date.getMinutes() + ":" + date.getSeconds() + " AM";
    },1000);


    // problem 11
    console.log("problem 11")

    function getRandomColor() {
      var letters = '0123456789ABCDEF';
      var color = '#';
      for (var i = 0; i < 6; i++) {
        color += letters[Math.floor(Math.random() * 16)];
      }
      return color;
    }


    var elm = document.getElementById("helloWorld");

    elm.onclick = () => {
        setTimeout(()=>{
            elm.style.color = getRandomColor();
        }, 3000);
    }

    // problem 12
    console.log("problem 12")

    function walkTheDOM (node, func){
        func(node);
        if (node.childNodes){
            for (var i in node.childNodes){
                walkTheDOM(node.childNodes[i], func);
            }
        }
    }

    walkTheDOM(document, (node)=>{
        if (node.tagName)
            console.log(node.tagName);
        else if (node.nodeValue)
            console.log(node.nodeValue);
    });


</script>
</body>
</html>
