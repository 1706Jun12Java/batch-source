<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Code Challenge</title>
</head>
<body>
<form> 
	<button id = "button">GET</button>
	<button id = "button2">POST</button>
</form>

<script>
document.getElementById("button").addEventListener("click",function(){
	sendAjaxGet('http://localhost:8080/ServletDemo/CC',createNewRow);
});

document.getElementById("button2").addEventListener("click",function(){
	sendAjaxPost('http://localhost:8080/ServletDemo/CC',createNewRow);
});

function sendAjaxGet(url, func) {
	 	var xhttp = new XMLHttpRequest() || new ActiveXObject("Microsoft.HTTPRequest");
			xhttp.onreadystatechange = function() {
	 			if (this.readyState === 4 && this.status === 200) {
	 				func(this);
	 			}
	 		};
	 		xhttp.open("GET", url);
	 		xhttp.send();
	 		return xhttp.responseText;
	 	}

function sendAjaxPost(url, func) {
 	var xhttp = new XMLHttpRequest() || new ActiveXObject("Microsoft.HTTPRequest");
		xhttp.onreadystatechange = function() {
 			if (this.readyState === 4 && this.status === 200) {
 				func(this);
 			}
 		};
 		xhttp.open("POST", url);
 		xhttp.send();
 		return xhttp.responseText;
 	}
function createNewRow(xhttp){
	var data = JSON.parse(xhttp.responseText);
	var table = document.createElement("table");
	for(var person in data){
		var meep = data[person];
		var tr = document.createElement("tr");
		var td1 = document.createElement("td");
		var td2 = document.createElement("td");
		var td3 = document.createElement("td");
		td1.appendChild(document.createTextNode(data[person].name));
		td2.appendChild(document.createTextNode(data[person].job));
		td3.appendChild(document.createTextNode(data[person].favColor));
		tr.appendChild(td1);
		tr.appendChild(td2);
		tr.appendChild(td3);
		table.appendChild(tr);
	}
	document.getElementsByTagName('body')[0].appendChild(table);
	
	
}
</script>
</body>
</html>